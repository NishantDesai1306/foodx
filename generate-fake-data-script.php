<?php
	$DB_HOST = "localhost";
	$DB_NAME = "foodx";
	$DB_USERNAME = "foodx";
	$DB_PASSWORD = "7j_Fe*gtsbNpch_M";



	$data = array(
		"breakfast" => array(
			"id" => 1,
			"name" => "Breakfast",
			"products" => array(
				array(
					"name" => "Organic Buckwheat Pancake & Waffle Mix",
					"quantity" => 1,
					"cost" => 8.99
				),
				array(
					"name" => "Artisan Granola",
					"quantity" => 0.454,
					"cost" => 9.99
				),
				array(
					"name" => "Bucking-eh Oats",
					"quantity" => 0.5,
					"cost" => 8.99
				),
				array(
					"name" => "Gluten Free Quinoa Granola",
					"quantity" => 0.340,
					"cost" => 9.99
				),
				array(
					"name" => "Gourmet Granola",
					"quantity" => 0.75,
					"cost" => 13.99
				),
				array(
					"name" => "Organic Almond Cashew Granola",
					"quantity" => 1,
					"cost" => 6.49
				),
				array(
					"name" => "Organic Berry Granola",
					"quantity" => 0.225,
					"cost" => 8.99
				),
				array(
					"name" => "Organic Cocoa Granola",
					"quantity" => 0.198,
					"cost" => 7.49
				),
				array(
					"name" => "Organic Heritage Flakes Eco-Pac",
					"quantity" => 0.9,
					"cost" => 10.49
				),
				array(
					"name" => "Organic Flax Plus Maple Pecan",
					"quantity" => 0.325,
					"cost" => 5.99
				),
				array(
					"name" => "Organic Koala Krisp Cereal",
					"quantity" => 0.325,
					"cost" => 5.39
				),
				array(
					"name" => "Organic Holy Crap Plus Single Serve Cup",
					"quantity" => 0.056,
					"cost" => 3.49
				)
			)
		),


		"oil" => array(
			"id" => 2,
			"name" => "Oil & Vinegar",
			"products" => array(
				array(
					"name" => "Brain Octane Oil",
					"quantity" => 0.946,
					"cost" => 72.49
				),
				array(
					"name" => "XCT Oil",
					"quantity" => 0.473,
					"cost" => 27.49
				),
				array(
					"name" => "Apple Cider Vinegar & Ginger",
					"quantity" => 1,
					"cost" => 10.99
				),
				array(
					"name" => "Genuine Brewed Rice Vinegar",
					"quantity" => 0.355,
					"cost" => 4.49
				),
				array(
					"name" => "Organic Apple Cider Vinegar",
					"quantity" => 0.946,
					"cost" => 9.99
				),
				array(
					"name" => "Organic Balsamic Vinegar",
					"quantity" => 0.5,
					"cost" => 6.99
				),
				array(
					"name" => "Organic Coconut Nectar Vinegar",
					"quantity" => 0.296,
					"cost" => 8.99
				),
				array(
					"name" => "Organic White Vinegar",
					"quantity" => 0.5,
					"cost" => 6.99
				),
				array(
					"name" => "Extra Virgin Olive Oil",
					"quantity" => 0.250,
					"cost" => 10.99
				),
				array(
					"name" => "Avocado Oil",
					"quantity" => 0.750,
					"cost" => 24.99
				),
				array(
					"name" => "Avocado Oil, Extra Virgin",
					"quantity" => 0.237,
					"cost" => 10.99
				),
				array(
					"name" => "Clarified Duck Fat",
					"quantity" => 0.320,
					"cost" => 10.99
				)
			)
		),




		"grains" => array(
			"id" => 3,
			"name" => "Rice, Beans & Grains",
			"products" => array(
				array(
					"name" => "Arborio Rice",
					"quantity" => 1,
					"cost" => 5.99
				),
				array(
					"name" => "Brown Basmati",
					"quantity" => 1,
					"cost" => 7.69
				),
				array(
					"name" => "Brown rice & Lentils",
					"quantity" => 0.25,
					"cost" => 3.39
				),
				array(
					"name" => "Brown Rice",
					"quantity" => 0.9,
					"cost" => 6.99
				),
				array(
					"name" => "Coconut Basmati Rice",
					"quantity" => 0.250,
					"cost" => 3.99
				),
				array(
					"name" => "Jasmine Rice",
					"quantity" => 0.9,
					"cost" => 8.49
				),
				array(
					"name" => "Organic Ancient Black Rice",
					"quantity" => 0.426,
					"cost" => 6.99
				),
				array(
					"name" => "Organic Brown Rice",
					"quantity" => 0.25,
					"cost" => 3.39
				),
				array(
					"name" => "Organic Quinoa",
					"quantity" => 1,
					"cost" => 16.99
				),
				array(
					"name" => "Organic Beans, Garbanzo",
					"quantity" => 2.27,
					"cost" => 23.09
				),
				array(
					"name" => "Organic Green Lentils",
					"quantity" => 1,
					"cost" => 11.99
				),
				array(
					"name" => "Organic Green Split Peas",
					"quantity" => 2.27,
					"cost" => 16.29
				)
			)
		),




		"butter" => array(
			"id" => 4,
			"name" => "Butters & Jam",
			"products" => array(
				array(
					"name" => "Almond Butter - Crunchy",
					"quantity" => 0.365,
					"cost" => 12.99
				),
				array(
					"name" => "Almond Butter - Smooth",
					"quantity" => 0.365,
					"cost" => 9.99
				),
				array(
					"name" => "Almond Cashew Mystery Butter",
					"quantity" => 365,
					"cost" => 10.99
				),
				array(
					"name" => "Cashew Butter",
					"quantity" => 0.250,
					"cost" => 7.99
				),
				array(
					"name" => "Chickpea Spread - Chocolate",
					"quantity" => 0.354,
					"cost" => 13.99
				),
				array(
					"name" => "Chickpea Spread - Creamy",
					"quantity" => 0.354,
					"cost" => 11.99
				),
				array(
					"name" => "Chocolate Hazelnut Butter",
					"quantity" => 0.34,
					"cost" => 16.99
				),
				array(
					"name" => "Classic Almond Butter",
					"quantity" => 0.454,
					"cost" => 16.99
				),
				array(
					"name" => "Nutrient Enhanced Peanut Butter",
					"quantity" => 0.34,
					"cost" => 2.49
				),
				array(
					"name" => "Tom Cat Tomato",
					"quantity" => 0.250,
					"cost" => 10.99
				),
				array(
					"name" => "Sugar Plum Jam",
					"quantity" => 0.354,
					"cost" => 12.99
				),
				array(
					"name" => "Serene Nectarine",
					"quantity" => 0.250,
					"cost" => 10.99
				)
			)
		)
	);


	$mysqli = new mysqli($DB_HOST, $DB_USERNAME, $DB_PASSWORD, $DB_NAME);

	if ($mysqli->connect_errno) {
			echo "Failed to connect to MySQL: " . $mysqli->connect_error;
			exit();
	}

	function getRandomImage() {
			return "/catalog/pro/" . rand(1, 20) . ".jpg";
	}

	function getRandomManufacturerId() {
		return rand(5, 10);
	}

	$modelCount = 25;

	foreach ($data as $categorySlug => $category) {
		$mysqli->query(
			"INSERT INTO `oc_category` " .
			"(`category_id`, `image`, `parent_id`, `top`, `column`, `sort_order`, `status`, `date_added`, `date_modified`) VALUES " .
			"(" . $category["id"] . ", '" . getRandomImage() . "', 0, 1, 0, 0, 1, '" . date("Y-m-d H:i:s") . "', '" . date("Y-m-d H:i:s") . "')"
		);

		$mysqli->query(
			"INSERT INTO `oc_category_description` " .
			"(`category_id`, `language_id`, `name`, `description`, `meta_title`, `meta_description`, `meta_keyword`) VALUES " .
			"(". $category["id"] .", 1, '". $category["name"] ."', '". $category["name"] ."', '". $category["name"] ."', '". $category["name"] ."', '". $category["name"] ."'), " .
			"(". $category["id"] .", 2, '". $category["name"] ."', '". $category["name"] ."', '". $category["name"] ."', '". $category["name"] ."', '". $category["name"] ."')"
		);

		$mysqli->query(
			"INSERT INTO `oc_category_to_layout` " .
			"(`category_id`, `store_id`, `layout_id`) VALUES " .
			"(". $category["id"] .", 0, 0)"
		);

		$mysqli->query(
			"INSERT INTO `oc_category_to_store` " .
			"(`category_id`, `store_id`) VALUES " .
			"(". $category["id"] .", 0)"
		);

		foreach ($category["products"] as $product) {
			$product_insert_query = "INSERT INTO `oc_product` " . 
				"(`model`, `sku`, `upc`, `ean`, `jan`, `isbn`, `mpn`, `location`, `quantity`, `stock_status_id`, `image`, `manufacturer_id`, `shipping`, `price`, `points`, `tax_class_id`, `date_available`, `weight`, `weight_class_id`, `length`, `width`, `height`, `length_class_id`, `subtract`, `minimum`, `sort_order`, `status`, `viewed`, `date_added`, `date_modified`) VALUES " .
				"('Product " . $modelCount . "', '', '', '', '', '', '', '', 100, 7, '" . getRandomImage() . "', ". getRandomManufacturerId() .", 1, " . $product["cost"] . ", 200, 9, '". date("Y-m-d") ."', 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, '" . date("Y-m-d H:i:s") . "', '" . date("Y-m-d H:i:s") . "')";
			$modelCount++;
			$mysqli->query($product_insert_query);

			$product_id = $mysqli->insert_id;


			$product_description_insert_query = "INSERT INTO `oc_product_description` " .
				"(`product_id`, `language_id`, `name`, `description`, `tag`, `meta_title`, `meta_description`, `meta_keyword`) VALUES " .
				"(" . $product_id . ", 1, '" . $product["name"] . "', '" . $product["name"] . "', '', '" . $product["name"] . "', '', ''), " .
				"(" . $product_id . ", 2, '" . $product["name"] . "', '" . $product["name"] . "', '', '" . $product["name"] . "', '', '')";
			
			$mysqli->query($product_description_insert_query);


			$product_image_insert_query = "INSERT INTO `oc_product_image` " .
				"(`product_id`, `image`, `sort_order`) VALUES " .
				"(" . $product_id . ", '" . getRandomImage() . "', 0), " .
				"(" . $product_id . ", '" . getRandomImage() . "', 1), " .
				"(" . $product_id . ", '" . getRandomImage() . "', 2), " .
				"(" . $product_id . ", '" . getRandomImage() . "', 3), " .
				"(" . $product_id . ", '" . getRandomImage() . "', 4)";

			$mysqli->query($product_image_insert_query);
			// echo $product_image_insert_query;


			$category_id = $category["id"];
			$product_category_mapping_query = "INSERT INTO `oc_product_to_category` " .
				"(`product_id`, `category_id`) VALUES " .
				"(" . $product_id . ", " . $category_id . ")";

			$mysqli->query($product_category_mapping_query);


			$product_layout_mapping_query = "INSERT INTO `oc_product_to_layout` " .
				"(`product_id`, `store_id`, `layout_id`) VALUES " .
				"(" . $product_id . ", 0, 0)";

			$mysqli->query($product_layout_mapping_query);

			$product_store_mapping_query = "INSERT INTO `oc_product_to_store` " .
				"(`product_id`, `store_id`) VALUES " .
				"(" . $product_id . ", 0)";

			$mysqli->query($product_store_mapping_query);
		}
	}

	$mysqli->close();
?>